<!DOCTYPE html>
<html>
<head>
	<title>Weather API Exercise</title>
	<link rel="stylesheet" href="/css/bootstrap.min.css">
	<style>
	#insertWeather {
		margin: 0 auto;
		padding: 10px;
	}
	</style>
</head>
<body>
	<div class="container-fluid">
		<h1>Weather API Exercise</h1>

		<div id="insertWeather"></div>
	</div>
	<script src="/js/jquery.js"></script>
	<script>
	"use strict";
    $(document).ready(function () {


    	//CURRENT WEATHER
		var weatherToday = $.get("http://api.openweathermap.org/data/2.5/weather", {
			APPID: "1fbecd438f3c0fc0b47f64744018d2f2",
			lat:   30.1,
			lon:   -98.42,
			units: "imperial"
		});

		weatherToday.always(function() {
			/*console.log("request sent");*/

		});

		weatherToday.fail(function(data, error) {
			/*console.log(error);
			console.log(weatherToday.status);*/
		});

		weatherToday.done(function(data) {
			/*console.log(data);*/
			$("#insertWeather").append(
				"<div><h2>Currently</h2><img src=\"http://openweathermap.org/img/w/" + data.weather[0].icon + ".png\"></div><div><p>Current temp is: " + data.main.temp + "&#8457;</p>"
				+ "<p>High: " + data.main.temp_max + "&#8457; | Low: " + data.main.temp_min + "&#8457;</p>" 
				+ "<p>Humidity: " + data.main.humidity + " | Cloudiness: " + data.clouds.all + "%</p></div>"

			)
		});

		// WEATHER FORECAST - 3 DAYS

    	var weatherForecast = $.get("http://api.openweathermap.org/data/2.5/forecast/daily", {
    		APPID: "1fbecd438f3c0fc0b47f64744018d2f2",
			lat:   30.1,
			lon:   -98.42,
			units: "imperial",
			cnt: 	3
    	});

    	weatherForecast.always(function () {
    		console.log("request sent");
		});

		weatherForecast.fail(function(data, error) {
			console.log(error);
			console.log(ajaxRequest.status);
		});

		weatherForecast.done(function(data) {
			console.log(data);
			console.log(data.list[0].weather[0].icon); // Day 1
			console.log(data.list[0].dt); // Day 1
			console.log(data.list[0].temp.max); // Day 1
			console.log(data.list[0].temp.min); // Day 1
			console.log(data.list[1].weather[0].icon); // Day 2
			console.log(data.list[1].dt); // Day 2
			console.log(data.list[1].temp.max); // Day 2
			console.log(data.list[1].temp.min); // Day 2
			console.log(data.list[2].weather[0].icon); // Day 3
			console.log(data.list[2].dt); // Day 3
			console.log(data.list[2].temp.max); // Day 3
			console.log(data.list[2].temp.min); // Day 3

			$("#insertWeather").append(
				"<div><h2>Day 1</h2><img src=\"http://openweathermap.org/img/w/" + data.list[0].weather[0].icon + ".png\"></div><div><p>High: " + data.list[0].temp.max + "&#8457; | Low: " + data.list[0].temp.min + "&#8457;</p></div>"
				+ "<div><h2>Day 2</h2><img src=\"http://openweathermap.org/img/w/" + data.list[1].weather[0].icon + ".png\"></div><div><p>High: " + data.list[1].temp.max + "&#8457; | Low: " + data.list[1].temp.min + "&#8457;</p></div>"
				+ "<div><h2>Day 3</h2><img src=\"http://openweathermap.org/img/w/" + data.list[2].weather[0].icon + ".png\"></div><div><p>High: " + data.list[2].temp.max + "&#8457; | Low: " + data.list[2].temp.min + "&#8457;</p></div>"
			)
    	});


		
	});

	</script>

</body>
</html>


