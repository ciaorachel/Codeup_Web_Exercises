<!DOCTYPE html>
<html>
<head>
	<title>Blog</title>
	<!-- Bootstrap -->
		<link rel="stylesheet" href="/css/bootstrap.min.css">
		<link rel="stylesheet" href="/css/custom.css">
		<style>
			body {
				background-color: #FFFFF3;
			}

			h3 {
				font-style: italic;
				color: #339966;
			}

			small {
				color: #a3a3a3;
			}

		</style>
</head>

<body>
	<div class="container-fluid">
		<div class="row">
			<h1 class="wrapper">My Blog</h1>
			<div class="col-md-3"></div>
				<div class="col-md-6" id="posts"></div>
		</div>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

<script>
(function() {
    "use strict";
    $(document).ready(function () {



    		$.get("/data/blog.json")
    			.done (function(data) {
    				$("#insertProducts").html(" ");
						$.each(data, function(index, data) {
							$("#posts").append(
	                            "<div><h3>" + data.title + " | <small>" + data.date + "</small></h3>"
	                            + "<p>" + data.content + "</p>"
	                            + "<small>" + data.categories + "</small></div>");
						})					
	    		})  .fail(function() {
	            })  .always(function() {
	            });

    });


   
/*
    // REFACTOR BLOG CODE ABOVE TO FIT WITHIN:

	(function() {
    "use strict";

    	var posts = [];

    	var ajaxRequest = $.get(/data/bog.json);

    	var getAllPosts = function() {
			ajaxRequest.always(function() {
				console.log("request sent");
			});

			ajaxRequest.fail(function(data, error) {
				console.log(error);
				console.log(ajaxRequest.status);
			});

			ajaxRequest.done(function(data, error) {
				$.each(data, function(index, postObject) {
					addPost(postObject);
				});
			});
    	};

	    var addPost = function(post) {
			posts.push(post);
			
			var header = "<h3>" + post.title + "</h3>":
			var content = "<p>" + post.content + "</p>":
			var date = "<p>" + post.date + "<p>":
			var categories = "<p>Categories: " + post.categories + "</p>":

			var htmlString = header + content + date + categories + "<br>";
			$("#blog-posts").append(htmlString);
		};

		$("#create-post-button").click(function() {
			var title = $("#post-title").val();
			var body = $("#post-body").val();
			var categories = ["blog", "example"];
			var date = new Date().toString();

			var post = {
				"title": title,
				"content": body,
				"date": date,
				"categories": categoreis
			}

			addPost(post);
		});

			$.post("/data/blog.json", {
				title:      "My Next Blog Post",
				content:    "It's a short one. Lorem ipsum dolor sit amet, consectetur adipisicing elit.",
				categories:  [
							  "blah", 
							  "brief", 
							  "AJAX"
							  ],
				date:      	  "June 30, 2015"
			});
	    };

	    addPost();

	    var removePost = function(index) {
			//find post in array by index
			//splice post out of the array
			//remove post element from page
	    };

	    var posts = [];

	    $(document).ready(function() {
			//load post data from JSON
			//loop over posts from json file
			//use addPost() to handle post data

			//attach event listener for new post form
			// attach event listener for remove post button
	    });
	})();
*/


})();
</script>

</body>
</html>